{"version":3,"file":"commonHelpers.js","sources":["../src/cat-api-js","../src/index.js"],"sourcesContent":["\nconst apiKey =\n  'live_Er46koKybYqW28gLOCiI46EOwSbW1Of6rmEYmaOYjgdL748hwWdb57JpKIyVtfLR';\n\nexport function fetchBreeds() {\n  return fetch('https://api.thecatapi.com/v1/breeds', {\n    headers: {\n      'x-api-key': apiKey,\n    },\n  })\n    .then(resp => {\n      if (!resp.ok) {\n        throw new Error('Error retrieving the list of breeds');\n      }\n      return resp.json();\n    })\n    .catch(err => {\n      console.error(err);\n      throw new Error('Error retrieving the list of breeds');\n    });\n}\n\nexport function fetchCatByBreed(breedId) {\n  return fetch(\n    `https://api.thecatapi.com/v1/images/search?breed_ids=${breedId}`,\n    {\n      headers: {\n        'x-api-key': apiKey,\n      },\n    }\n  )\n    .then(resp => {\n      if (!resp.ok && !catData) {\n        throw new Error('Error getting information about a cat by breed');\n      }\n      return resp.json();\n    })\n    .then(data => {\n      const catData = data[0];\n      return catData;\n    })\n    .catch(err => {\n      console.error(err);\n      throw new Error('Error getting information about a cat by breed');\n    });\n}","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport { fetchBreeds, fetchCatByBreed } from './cat-api-js';\n\nconst select = document.querySelector('.breed-select');\nconst loaderText = document.querySelector('.loader');\nconst catInfoDiv = document.querySelector('.cat-info');\n\nfunction fillInSelect() {\n  select.hidden = true;\n  loaderText.hidden = false;\n  return fetchBreeds().then(elements => {\n    elements.forEach(({ id, name }) => {\n      const option = document.createElement('option');\n      option.value = id;\n      option.textContent = name;\n      select.add(option);\n      loaderText.style.display = 'none';\n      select.hidden = false;\n    });\n  });\n}\n\nfillInSelect()\n  .then()\n  .catch(error => {\n    loaderText.style.display = 'none';\n    iziToast.error({\n      closeOnEscape: true,\n      closeOnClick: true,\n      backgroundColor: 'tomato',\n      messageColor: 'white',\n      position: 'topRight',\n      messageSize: '20',\n      message: `Oops! Something went wrong! Try reloading the page!`,\n    });\n  });\n\nselect.addEventListener('change', onSelectChange);\n\nfunction onSelectChange() {\n  catInfoDiv.hidden = true;\n  loaderText.style.display = 'block';\n  const breedId = select.value;\n\n  fetchCatByBreed(breedId)\n    .then(data => {\n      renderCatInfo(data);\n      loaderText.style.display = 'none';\n    })\n    .catch(error => {\n      loaderText.style.display = 'none';\n      iziToast.error({\n        closeOnEscape: true,\n        closeOnClick: true,\n        backgroundColor: 'tomato',\n        messageColor: 'white',\n        position: 'topRight',\n        messageSize: '20',\n        message: `Oops! Something went wrong! Try reloading the page!`,\n      });\n    });\n}\n\nfunction renderCatInfo(data) {\n  const { url, breeds } = data;\n  const breedInfo = breeds[0];\n\n  const markup = `\n  <div class=\"cat-info-wrapper\">\n    <img class=\"breed-img\" src=\"${url}\" alt=\"cat\" width=500/>\n    <div class=\"cat-text-wrapper\">\n    <h2>${breedInfo.name}</h2>\n    <p><strong>Description:</strong> ${breedInfo.description}</p>\n    <p><strong>Temperament:</strong> ${breedInfo.temperament}</p>\n    </div>\n    </div>\n  `;\n  catInfoDiv.innerHTML = markup;\n  catInfoDiv.hidden = false;\n}\n"],"names":["apiKey","fetchBreeds","resp","err","fetchCatByBreed","breedId","data","select","loaderText","catInfoDiv","fillInSelect","elements","id","name","option","error","iziToast","onSelectChange","renderCatInfo","url","breeds","breedInfo","markup"],"mappings":"svBACA,MAAMA,EACJ,wEAEK,SAASC,GAAc,CAC5B,OAAO,MAAM,sCAAuC,CAClD,QAAS,CACP,YAAaD,CACd,CACL,CAAG,EACE,KAAKE,GAAQ,CACZ,GAAI,CAACA,EAAK,GACR,MAAM,IAAI,MAAM,qCAAqC,EAEvD,OAAOA,EAAK,MAClB,CAAK,EACA,MAAMC,GAAO,CACZ,cAAQ,MAAMA,CAAG,EACX,IAAI,MAAM,qCAAqC,CAC3D,CAAK,CACL,CAEO,SAASC,EAAgBC,EAAS,CACvC,OAAO,MACL,wDAAwDA,IACxD,CACE,QAAS,CACP,YAAaL,CACd,CACF,CACF,EACE,KAAKE,GAAQ,CACZ,GAAI,CAACA,EAAK,IAAM,CAAC,QACf,MAAM,IAAI,MAAM,gDAAgD,EAElE,OAAOA,EAAK,MAClB,CAAK,EACA,KAAKI,GACYA,EAAK,EAEtB,EACA,MAAMH,GAAO,CACZ,cAAQ,MAAMA,CAAG,EACX,IAAI,MAAM,gDAAgD,CACtE,CAAK,CACL,CCzCA,MAAMI,EAAS,SAAS,cAAc,eAAe,EAC/CC,EAAa,SAAS,cAAc,SAAS,EAC7CC,EAAa,SAAS,cAAc,WAAW,EAErD,SAASC,GAAe,CACtB,OAAAH,EAAO,OAAS,GAChBC,EAAW,OAAS,GACbP,EAAW,EAAG,KAAKU,GAAY,CACpCA,EAAS,QAAQ,CAAC,CAAE,GAAAC,EAAI,KAAAC,CAAI,IAAO,CACjC,MAAMC,EAAS,SAAS,cAAc,QAAQ,EAC9CA,EAAO,MAAQF,EACfE,EAAO,YAAcD,EACrBN,EAAO,IAAIO,CAAM,EACjBN,EAAW,MAAM,QAAU,OAC3BD,EAAO,OAAS,EACtB,CAAK,CACL,CAAG,CACH,CAEAG,EAAc,EACX,KAAM,EACN,MAAMK,GAAS,CACdP,EAAW,MAAM,QAAU,OAC3BQ,EAAS,MAAM,CACb,cAAe,GACf,aAAc,GACd,gBAAiB,SACjB,aAAc,QACd,SAAU,WACV,YAAa,KACb,QAAS,qDACf,CAAK,CACL,CAAG,EAEHT,EAAO,iBAAiB,SAAUU,CAAc,EAEhD,SAASA,GAAiB,CACxBR,EAAW,OAAS,GACpBD,EAAW,MAAM,QAAU,QAC3B,MAAMH,EAAUE,EAAO,MAEvBH,EAAgBC,CAAO,EACpB,KAAKC,GAAQ,CACZY,EAAcZ,CAAI,EAClBE,EAAW,MAAM,QAAU,MACjC,CAAK,EACA,MAAMO,GAAS,CACdP,EAAW,MAAM,QAAU,OAC3BQ,EAAS,MAAM,CACb,cAAe,GACf,aAAc,GACd,gBAAiB,SACjB,aAAc,QACd,SAAU,WACV,YAAa,KACb,QAAS,qDACjB,CAAO,CACP,CAAK,CACL,CAEA,SAASE,EAAcZ,EAAM,CAC3B,KAAM,CAAE,IAAAa,EAAK,OAAAC,CAAQ,EAAGd,EAClBe,EAAYD,EAAO,GAEnBE,EAAS;AAAA;AAAA,kCAEiBH;AAAA;AAAA,UAExBE,EAAU;AAAA,uCACmBA,EAAU;AAAA,uCACVA,EAAU;AAAA;AAAA;AAAA,IAI/CZ,EAAW,UAAYa,EACvBb,EAAW,OAAS,EACtB"}